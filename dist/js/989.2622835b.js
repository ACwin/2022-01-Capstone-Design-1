"use strict";(self["webpackChunkfront"]=self["webpackChunkfront"]||[]).push([[989],{1581:function(e,l,n){n.r(l),n.d(l,{default:function(){return F}});var t=n(3396),a=n(7139),s=n(4870),u=n.p+"img/face.4d676e61.jpg",r=n(9488),o=n(678),i=n(5410),c=n.n(i),d=n(9733),g=n(6431);const p=e=>((0,t.dD)("data-v-3f14472e"),e=e(),(0,t.Cn)(),e),f={key:0,class:"userDiv"},m={class:"userInfo"},v=p((()=>(0,t._)("img",{src:u,class:"face"},null,-1))),_={class:"userId"},k=p((()=>(0,t._)("br",null,null,-1))),b={class:"username"},S=p((()=>(0,t._)("br",null,null,-1))),w=p((()=>(0,t._)("br",null,null,-1))),C=(0,t.Uk)("Modify signature"),y=p((()=>(0,t._)("br",null,null,-1))),I=p((()=>(0,t._)("br",null,null,-1))),h=(0,t.Uk)("Login out");var U={__name:"UserView",setup(e){const{proxy:l}=(0,t.FN)(),n=(0,o.tv)();null===sessionStorage.getItem("user")&&n.replace("/login");const u=(0,s.iH)(JSON.parse(sessionStorage.getItem("user"))),i=()=>{l.request.post("/api/user/update",c().stringify({signature:u.value.personalizedSignature})).then((e=>{1e4===e.data.status?(d.F.success("Update success!"),sessionStorage.setItem("user",JSON.stringify(u.value))):10007===e.data.status?n.replace("/login"):d.F.fail(e.data.msg)}))},p=()=>{g.V.confirm({title:"Confirm to login out?",confirmButtonText:"Confirm",cancelButtonText:"Cancel"}).then((()=>{d.F.loading({forbidClick:!0}),l.request.post("/api/user/logout").then((()=>{d.F.clear(),sessionStorage.removeItem("user"),n.replace("/login")}))})).catch((()=>{}))};return(e,l)=>{const n=(0,t.up)("van-field"),o=(0,t.up)("van-button");return(0,t.wg)(),(0,t.iD)(t.HY,null,[null!==u.value?((0,t.wg)(),(0,t.iD)("div",f,[(0,t._)("div",m,[v,(0,t._)("div",_,[(0,t.Uk)(" ID: "+(0,a.zw)(u.value.id),1),k,(0,t._)("div",b,(0,a.zw)(u.value.username),1)])]),S,(0,t.Wm)(n,{label:"signature",modelValue:u.value.personalizedSignature,"onUpdate:modelValue":l[0]||(l[0]=e=>u.value.personalizedSignature=e)},null,8,["modelValue"]),w,(0,t.Wm)(o,{type:"primary",block:"",round:"",onClick:i},{default:(0,t.w5)((()=>[C])),_:1}),y,I,(0,t.Wm)(o,{type:"danger",block:"",round:"",onClick:p},{default:(0,t.w5)((()=>[h])),_:1})])):(0,t.kq)("",!0),(0,t.Wm)((0,s.SU)(r.Z))],64)}}},z=n(89);const D=(0,z.Z)(U,[["__scopeId","data-v-3f14472e"]]);var F=D}}]);